(function(n,t){function u(t,u){this.element=t;this.options=n.extend({},r,u);this._defaults=r;this._name=i;this._loader=null;this.init()}function f(){n[i]||(n.isLoading=function(t){n("body").isLoading(t)})}var i="isLoading",r={position:"right",text:"","class":"icon-refresh",tpl:'<div style="margin-top:20%;margin-left:48%;" class="isloading-wrapper %wrapper%"><img src="./images/ajax-loader.gif"><br/><br/>Loading...<\/div>',disableSource:!0,disableOthers:[]};u.prototype={init:function(){n(this.element).is("body")&&(this.options.position="overlay");this.show()},show:function(){var i=this,u=i.options.tpl.replace("%wrapper%"," isloading-show  isloading-"+i.options.position),r;u=u.replace("%class%",i.options["class"]);u=u.replace("%text%",i.options.text!==""?i.options.text+" ":"");i._loader=n(u);n(i.element).is("input, textarea")&&!0===i.options.disableSource?n(i.element).attr("disabled","disabled"):!0===i.options.disableSource&&n(i.element).addClass("disabled");switch(i.options.position){case"inside":n(i.element).html(i._loader);break;case"overlay":if(r=null,n(i.element).is("body")){r=n('<div class="isloading-overlay" style="position:fixed; left:0; top:0; z-index: 0; width: 100%; height: '+n(t).height()+'px;" />');n("body").prepend(r);n(t).on("resize",function(){r.height(n(t).height()+"px");i._loader.css({top:n(t).height()/2-i._loader.outerHeight()/2+"px"})})}else{var e=n(i.element).css("position"),f={},o=n(i.element).outerHeight()+"px";f="relative"===e||"absolute"===e?{top:0,left:0}:n(i.element).position();r=n('<div class="isloading-overlay" style="position:absolute; top: '+f.top+"px; left: "+f.left+"px; z-index: 0;width: 100%; height: "+o+';" />');n(i.element).prepend(r);n(t).on("resize",function(){r.height(n(i.element).outerHeight()+"px");i._loader.css({top:r.outerHeight()/2-i._loader.outerHeight()/2+"px"})})}r.html(i._loader);i._loader.css({top:r.outerHeight()/2-i._loader.outerHeight()/2+"px"});break;default:n(i.element).after(i._loader)}i.disableOthers()},hide:function(){"overlay"===this.options.position?n(this.element).find(".isloading-overlay").first().remove():(n(this._loader).remove(),n(this.element).text(n(this.element).attr("data-isloading-label")));n(this.element).removeAttr("disabled").removeClass("disabled");this.enableOthers()},disableOthers:function(){n.each(this.options.disableOthers,function(t,i){var r=n(i);r.is("button, input, textarea")?r.attr("disabled","disabled"):r.addClass("disabled")})},enableOthers:function(){n.each(this.options.disableOthers,function(t,i){var r=n(i);r.is("button, input, textarea")?r.removeAttr("disabled"):r.removeClass("disabled")})}};n.fn[i]=function(t){return this.each(function(){if(t&&"hide"!==t||!n.data(this,"plugin_"+i))n.data(this,"plugin_"+i,new u(this,t));else{var r=n.data(this,"plugin_"+i);"hide"===t?r.hide():r.show()}})};f()})(jQuery,window,document);