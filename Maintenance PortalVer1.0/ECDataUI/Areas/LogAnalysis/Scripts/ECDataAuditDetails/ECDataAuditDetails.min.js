function BlockUI(){$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px",opacity:.5,color:"#fff"}})}function showData(n){var r=$("#ddProgramList").val()+"";if(r==""&&bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please select application name<\/span>',callback:function(){}}),n=="1"&&!$("#SearchParametersForm").valid()){bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter all required fields<\/span>',callback:function(){refreshCaptcha()}});return}$("#DtlsSearchParaListCollapse").hasClass("collapsed")&&$("#DtlsSearchParaListCollapse").trigger("click");var u=$("#txtFromDate").val(),f=$("#txtToDate").val(),e=$("#ddOfficeList option:selected").val(),o=$("#ddOfficeList option:selected").text(),t=$("#StatTableDataID");$.fn.DataTable.isDataTable("#StatTableDataID")&&t.dataTable().fnDestroy();$("#PDFSPANID").show();t.DataTable({ajax:{url:"/LogAnalysis/ECDataAuditDetails/GetECDataAuditDetailsList",type:"POST",headers:header,data:{fromDate:u,ToDate:f,selectedOfc:e,PopulateOccurances:n,captcha:$("#Captcha").val(),programs:r,selectedOfficeName:o},dataSrc:function(n){if($("#DtlsSearchParaListCollapse").hasClass("collapsed")&&$("#DtlsSearchParaListCollapse").trigger("click"),n.recordsFiltered==0)unBlockUI(),bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.errorMessage+"<\/span>",callback:function(){$("#OfficeWiseTbl").hide();$("#DtlsSearchParaListCollapse").hasClass("collapsed")||($("#DtlsSearchParaListCollapse").trigger("click"),$.fn.DataTable.isDataTable("#StatTableDataID")&&t.dataTable().fnDestroy());$("#SearchParaListCollapse").hasClass("collapsed")||$("#SearchParaListCollapse").trigger("click");$("#PDFSPANID").hide()}});else return unBlockUI(),n.data},error:function(){unBlockUI();refreshCaptcha();bootbox.alert('<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Something Went Wrong!<\/span>')},beforeSend:function(){blockUI("loading data.. please wait...")}},serverSide:!0,pageLength:100,scrollY:"400px",scrollCollapse:!0,bPaginate:!0,bLengthChange:!1,sScrollX:"100%",bInfo:!0,info:!0,bFilter:!1,searching:!1,columns:[{data:"SRONAME",searchable:!0,orderable:!1,visible:!0},{data:"FRN",searchable:!0,orderable:!0,visible:!0},{data:"DATEOFMODIFICATION",searchable:!0,orderable:!1,visible:!0},{data:"MODIFICATION_AREA",searchable:!0,orderable:!1,visible:!0},{data:"MODIFICATION_TYPE",searchable:!0,orderable:!1,visible:!0},{data:null,className:"center",sorting:"false",render:function(n){return n.MODIFICATION_DESCRIPTION}},{data:"APPLICATION_NAME",searchable:!0,orderable:!1,visible:!0},{data:"IPADRESS",searchable:!0,orderable:!1,visible:!0},{data:"hostname",searchable:!0,orderable:!1,visible:!0}],autoWidth:!0,preDrawCallback:function(){unBlockUI()},fnRowCallback:function(n){return unBlockUI(),n},drawCallback:function(){unBlockUI()},fnInitComplete:function(t,r){if(unBlockUI(),r.status=="0"?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+r.errorMessage+"<\/span>",callback:function(){refreshCaptcha()}}):(refreshCaptcha(),$("#PDFSPANID").html(r.PDFDownloadBtn)),n=="1"&&r.status=="1"){$("#OfficeWiseTbl").show();var u="";for(i=0;i<r.OfficeWiseOccurance.length;i++)u+="<tr><td style='cursor:pointer;' class='text-success' onclick='LoadOfficeWise("+r.OfficeWiseOccurance[i].SROCode+")'>"+r.OfficeWiseOccurance[i].SROName+"<\/td><td>"+r.OfficeWiseOccurance[i].NoOfOccurances+"<\/td><td>"+r.OfficeWiseOccurance[i].LastModifiedDateTime+"<\/td><\/tr>";$("#OfficeWiseTbl tbody").empty();$("#OfficeWiseTbl tbody").append(u);$("#SearchParaListCollapse").hasClass("collapsed")&&$("#SearchParaListCollapse").trigger("click");$("#TotModfctnOfcCount").html(r.OfficeWiseOccurance.length);$("#TotModfctnCount").html(r.TotModfctnCount)}$(".dt-button").addClass("btn btn-primary dt-button buttons-pdf buttons-html5");$(".dataTables_scrollBody thead tr").css({visibility:"collapse"})}})}function refreshCaptcha(){$("#Captcha").val("");$("#dvCaptcha input").val("");$(".newCaptcha").trigger("click")}function LoadMasterTables(n,t,i,r,u,f,e){$("#MasterTableModel").load("/ECDataAuditDetails/LoadMasterTables",{LogID:n,LOGTYPEID:t,SROCode:i,ItemID:r,SroName:u,ModificationArea:f,FRN:e});$("#MasterTableModel").modal("show")}function LoadOfficeWise(n){$("#ddOfficeList").val(n);showData("0")}function PDFDownloadFun(n,t,i,r,u){window.location.href="/LogAnalysis/ECDataAuditDetails/ExportECDataModificationInfoToPDF?FromDate="+n+"&ToDate="+t+"&SelectedOfc="+i+"&Programs="+r+"&OfficeName="+u}var token="",header={};$(document).ready(function(){token=$("[name=__RequestVerificationToken]").val();header.__RequestVerificationToken=token;$("#btnSearch").click(function(){showData("1")});$("#txtFromDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",maxDate:"0",pickerPosition:"bottom-left"});$("#txtToDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",maxDate:"0",pickerPosition:"bottom-left"});$("#divFromDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",maxDate:new Date,pickerPosition:"bottom-left"});$("#divToDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",maxDate:new Date,pickerPosition:"bottom-left"});$("#txtToDate").datepicker({format:"dd/mm/yyyy"}).datepicker("setDate","31/12/2018");$("#txtFromDate").datepicker({format:"dd/mm/yyyy",changeMonth:!0,changeYear:!0}).datepicker("setDate","07/12/2018");$("#SearchParaListCollapse").click(function(){var n=$("#ToggleIconSearchPara").attr("class");n=="fa fa-minus-square-o fa-pull-left fa-2x"?$("#ToggleIconSearchPara").removeClass(n).addClass("fa fa-plus-square-o fa-pull-left fa-2x"):n=="fa fa-plus-square-o fa-pull-left fa-2x"&&$("#ToggleIconSearchPara").removeClass(n).addClass("fa fa-minus-square-o fa-pull-left fa-2x")});$("#DtlsSearchParaListCollapse").click(function(){var n=$("#DtlsToggleIconSearchPara").attr("class");n=="fa fa-minus-square-o fa-pull-left fa-2x"?$("#DtlsToggleIconSearchPara").removeClass(n).addClass("fa fa-plus-square-o fa-pull-left fa-2x"):n=="fa fa-plus-square-o fa-pull-left fa-2x"&&$("#DtlsToggleIconSearchPara").removeClass(n).addClass("fa fa-minus-square-o fa-pull-left fa-2x")});$("#ddProgramList").multiselect({includeSelectAllOption:!0,numberDisplayed:0,nSelectedText:"selected",buttonText:function(n){var t=$("#ddProgramList").children("option").length;return n.length>0?n.length===t?" All Selected":n.length+" Selected":"None selected"}});$(".multiselect").addClass("minimal");$(".multiselect").addClass("btn-sm")});