function DisplayApproveServicePackDetailsList(){var n=$("#tblServicePackGrid");n.dataTable().fnDestroy();n.DataTable({ajax:{url:"/ServicePack/ServicePackDetails/GetServicePackDetailsList",type:"POST",data:{IsRequestForApprovalsList:"true"},dataSrc:function(n){return n.data},error:function(){bootbox.alert("Something Went Wrong")}},serverSide:!0,scrollY:"400px",scrollCollapse:!0,sScrollX:!1,bInfo:!0,columns:[{data:"ReferenceID",className:"text-center",width:"1%"},{data:"ApproveBTn",className:"text-center",width:"1%"},{data:"ReleaseType",width:"1%"},{data:"IsTestOrFinal",width:"1%"},{data:"MajorVersion",width:"1%"},{data:"MinorVersion",width:"1%"},{data:"ServicePackAddedDateTime",width:"1%",className:"text-center"},{data:"SPDescription",width:"5%"},{data:"InstallationProc",width:"5%"},{data:null,className:"center",sorting:"false",width:"5%",render:function(n){return n.ChangesList}},{data:null,width:"1%",render:function(n){return n.VirtualPath},bSortable:!1}],autoWidth:!1});$("#tblServicePackGrid_info").css("font-size","120%");$(".dataTables_length").css("float","left")}function DownloadServicePack(n){$.ajax({url:"/ServicePack/ServicePackDetails/CheckIfFileExists",data:{VirtualPath:n},type:"GET",success:function(t){t.success==!0?window.location.href="/ServicePack/ServicePackDetails/DownloadServicePackFile?virtualPath="+n:bootbox.alert('<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+t.message+"<\/span>",function(){})},error:function(){}})}function ApproveServicePack(n){$.ajax({type:"POST",datatype:"json",url:"/ServicePack/ServicePackDetails/GetServicePackDetailsForApprovalAndRelease",async:!1,cache:!1,data:{EncryptedID:n},success:function(n){$("#dvServicePackDetailsSummaryModalBody").html(n);$("#dvServicePackDetailsSummaryMain").show();$("#dvServicePackDetailsSummaryModal").modal("show")},error:function(){}})}function AddReleaseNotes(){var t,i,n,r;if($("#DateRequired").val()==""){$("#ReleaseDateValID").text("Please Select Release Date");return}if($("#txtReleaseNotes").val()!=""&&(t=new RegExp("^[a-zA-Z0-9-/., ]+$"),i=t.test($("#txtReleaseNotes").val()),!i)){$("#ReleaseNotesValID").text("Invalid Release Note");return}event.preventDefault();n=new FormData;n.append("ReleaseNotes",$("#txtReleaseNotes").val());n.append("SpID",$("#hdnEncryptedID").val());n.append("ReleaseDate",$("#DateRequired").val());r=$("[name=__RequestVerificationToken]").val();n.append("__RequestVerificationToken",r);$.ajax({url:"/ServicePack/ServicePackDetails/AddReleaseNotes",type:"POST",data:n,contentType:!1,processData:!1,success:function(n){if(n.serverError==!0&&n.success==!1)(n.message!=null||n.message!="")&&bootbox.alert({message:n.message,callback:function(){window.location.href="/Home/HomePage"}});else if(n.success)bootbox.alert({message:n.message,callback:function(){window.location.reload()}});else if(n.errorType==1)$("#ReleaseDateValID").text(n.message);else if(n.errorType==2)$("#ReleaseNotesValID").text(n.message);else{bootbox.alert(n.message);$("#dvServicePackDetailsSummaryModal").modal("hide");return}},error:function(){bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Error in Processing<\/span>'})}})}$(document).ready(function(){DisplayApproveServicePackDetailsList();$("#btnSubmitReleaseNotes").click(AddReleaseNotes);$("#divFromDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",maxDate:new Date,pickerPosition:"bottom-left"});$("#DateRequired").change(function(){$("#DateRequired").val()==""?$("#ReleaseDateValID").text("Please Select Release Date"):$("#ReleaseDateValID").text("")});$("#txtReleaseNotes").change(function(){if($("#txtReleaseNotes").val()!=""){var n=new RegExp("^[a-zA-Z0-9-/., ]+$"),t=n.test($("#txtReleaseNotes").val());t?$("#ReleaseNotesValID").text(""):$("#ReleaseNotesValID").text("Invalid Release Note")}else $("#ReleaseNotesValID").text("")})});$("#dvServicePackDetailsSummaryModal").on("shown.bs.modal",function(){$(".input-group.date").datepicker({format:"dd/mm/yyyy",startDate:new Date,todayBtn:"linked",autoclose:!0,todayHighlight:!0})});