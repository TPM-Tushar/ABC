var token="",header={};$(document).ready(function(){$("#txtCurrentPassword").focus();token=$("[name=__RequestVerificationToken]").val();header.__RequestVerificationToken=token;$("#txtCurrentPassword").keypress(function(n){var t=n.which;t==13&&$("#btnCheckCurrentPassword").trigger("click")});$("#btnGoToHome").click(function(){window.location.href="/Home/HomePage"});$("#btnReset").click(function(){$("#txtNewPassword").val("");$("#txtConfirmPassword").val("");$("#txtCurrentPassword").val("")});$("#btnChangePassword").click(function(){$("#changePasswordFormID").valid()&&($("#txtNewPassword").val()!=""&&$("#txtConfirmPassword")!=""&&$("#txtCurrentPassword")!=""?$("#txtNewPassword").val()==$("#txtConfirmPassword").val()?$.ajax({url:"/Login/GetSessionSalt",type:"GET",async:!0,cache:!1,success:function(n){if(n.success==!0){if(n.serverError==!0&&n.success==!1)(n.message!=null||n.message!="")&&($.unblockUI(),bootbox.alert(n.message,function(n){n&&(window.location.href="/Error/Index")}));else if(n.dataMessage!=null){var t=hex_sha512($("#txtNewPassword").val()),i=t+rstr2hex(n.SENCData).toUpperCase(),r=hex_sha512(i);$("#txtNewPassword").val(r);var t=hex_sha512($("#txtConfirmPassword").val()),i=t+rstr2hex(n.SENCData).toUpperCase(),r=hex_sha512(i);$("#txtConfirmPassword").val(r);var t=hex_sha512($("#txtCurrentPassword").val()),i=t+rstr2hex(n.SENCData).toUpperCase(),r=hex_sha512(i);$("#txtCurrentPassword").val(r);$.ajax({url:"/UserManagement/UserProfileDetails/SaveChangedPassword",type:"POST",headers:header,data:$("#changePasswordFormID").serialize(),success:function(n){n.success?bootbox.alert({message:'<i class="fa fa-check text-success boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>",callback:function(){$("#btnLoggOffID").trigger("click")}}):bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>",callback:function(){$("#txtNewPassword").val("");$("#txtConfirmPassword").val("");$("#txtCurrentPassword").val("")}})},error:function(n){alert("Error in Processing"+n)}})}$.unblockUI()}},error:function(){window.location.href="/Error/Index";$.unblockUI()}}):(bootbox.alert('<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Passwords are not matching <\/span>'),$("#txtNewPassword").val(""),$("#txtConfirmPassword").val("")):(bootbox.alert('<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please Enter all required fields<\/span>'),$("#txtNewPassword").val(""),$("#txtConfirmPassword").val(""),$("#txtCurrentPassword").val("")))})});