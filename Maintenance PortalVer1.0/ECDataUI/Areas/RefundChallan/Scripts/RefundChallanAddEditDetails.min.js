function SaveRefundChallanDetails(){var n=new FormData,t;n.append("RowId",$("#idRowId").val());n.append("InstrumentNumber",$("#idChallanNumber").val());n.append("ReEnterInstrumentNumber",$("#idReEnterChallanNumber").val());n.append("InstrumentDate",$("#idChallanDate").val());n.append("ChallanAmount",$("#idChallanAmount").val());n.append("RefundAmount",$("#idRefundAmount").val());n.append("PartyName",$("#idPartyName").val());n.append("ApplicationDateTime",$("#idApplicationDateTime").val());n.append("RejectionReason",$("#idRejectionReason").val());n.append("PartyMobileNumber",$("#idPartyMobileNumber").val());t=$("#RefundChallanDetailForm");t.removeData("validator");t.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);blockUI();$.ajax({type:"POST",url:"/RefundChallan/RefundChallan/SaveRefundChallanDetails",data:$("#RefundChallanDetailForm").serialize(),headers:header,success:function(n){unBlockUI();n.success?bootbox.alert({message:'<i class="fa fa-check text-success boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>",callback:function(){window.location.reload()}}):(unBlockUI(),bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>"}))},error:function(){unBlockUI();bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Error in processing<\/span>'})}})}function UpdateRefundChallanDetails(){var n=new FormData,t;n.append("RowId",$("#idRowId").val());n.append("InstrumentNumber",$("#idChallanNumber").val());n.append("ReEnterInstrumentNumber",$("#idReEnterChallanNumber").val());n.append("InstrumentDate",$("#idChallanDate").val());n.append("ChallanAmount",$("#idChallanAmount").val());n.append("RefundAmount",$("#idRefundAmount").val());n.append("PartyName",$("#idPartyName").val());n.append("ApplicationDateTime",$("#idApplicationDateTime").val());n.append("RejectionReason",$("#idRejectionReason").val());n.append("PartyMobileNumber",$("#idPartyMobileNumber").val());t=$("#RefundChallanDetailForm");t.removeData("validator");t.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);blockUI();$.ajax({type:"POST",url:"/RefundChallan/RefundChallan/UpdateRefundChallanDetails",data:$("#RefundChallanDetailForm").serialize(),headers:header,success:function(n){unBlockUI();n.success?bootbox.alert({message:'<i class="fa fa-check text-success boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>",callback:function(){window.location.reload()}}):bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>"})},error:function(){unBlockUI();bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Error in processing<\/span>'})}})}function FinalizeRefundChallanDetails(){var n=new FormData,t;n.append("RowId",$("#idRowId").val());n.append("InstrumentNumber",$("#idChallanNumber").val());n.append("ReEnterInstrumentNumber",$("#idReEnterChallanNumber").val());n.append("InstrumentDate",$("#idChallanDate").val());n.append("ChallanAmount",$("#idChallanAmount").val());n.append("RefundAmount",$("#idRefundAmount").val());n.append("PartyName",$("#idPartyName").val());n.append("ApplicationDateTime",$("#idApplicationDateTime").val());n.append("RejectionReason",$("#idRejectionReason").val());n.append("PartyMobileNumber",$("#idPartyMobileNumber").val());t=$("#RefundChallanDetailForm");t.removeData("validator");t.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);blockUI();$.ajax({type:"POST",url:"/RefundChallan/RefundChallan/UpdateRefundChallanDetails",data:$("#RefundChallanDetailForm").serialize(),headers:header,success:function(n){n.success?(blockUI("Finalizing DR Order... please wait..."),$.ajax({url:"/RefundChallan/RefundChallan/FinalizeRefundChallanDetails",headers:header,datatype:"json",data:{RowId:$("#idRowId").val()},type:"GET",success:function(n){unBlockUI();n.success?bootbox.alert({message:'<i class="fa fa-check fa-lg boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>",callback:function(){window.location.href="/RefundChallan/RefundChallan/RefundChallanView"}}):bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>"})},error:function(){unBlockUI()}})):(unBlockUI(),bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.message+"<\/span>"}))},error:function(){unBlockUI();bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Error in processing<\/span>'})}})}function ChangeInstrumentNoType(){var n=document.getElementById("idChallanNumber");n.type=="text"&&(n.type="password")}var token="",header={};isValid=!1;$(document).ready(function(){token=$("[name=__RequestVerificationToken]").val();header.__RequestVerificationToken=token;$("#divApplicationDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",startDate:new Date("01/01/2003"),maxDate:new Date,minDate:new Date("01/01/2003"),pickerPosition:"bottom-left"});$("#divInstrumentDate").datepicker({autoclose:!0,format:"dd/mm/yyyy",endDate:"+0d",startDate:new Date("01/01/2003"),maxDate:new Date,minDate:new Date("01/01/2003"),pickerPosition:"bottom-left"});$("#idIsOrderInEditMode").val()=="False"&&$("#idRefundChallanPurpose option").attr("selected",!1);$("#idRefundChallanPurpose").multiselect({includeSelectAllOption:!0,enableFiltering:!0,nonSelectedText:"None Selected",enableCaseInsensitiveFiltering:!0,maxHeight:200});$("#closeRefundChallanEntryDetailsForm").click(function(){$("#RefundChallanToggleIcon").click();$("#RefundChallanEntryPanelAllTabs").hide()});$(".multiselect").addClass("minimal");$(".multiselect").addClass("btn-sm");$("#UpdateRefundChallanDetailsBtn").click(function(){$("#idPartyName").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Party Name.<\/span>'}):$("#idPartyMobileNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Mobile Number.<\/span>'}):$("#idChallanNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Number.<\/span>'}):$("#idReEnterChallanNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Re-Enter Challan Number.<\/span>'}):$("#idChallanDate").val()==""||$("#idChallanDate").val()==0?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Date.<\/span>'}):$("#idChallanAmount").val()==""||$("#idChallanAmount").val()==0||$("#idChallanAmount").val()=="0"?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Amount.<\/span>'}):$("#idRefundAmount").val()==""||$("#idRefundAmount").val()==0||$("#idChallanAmount").val()=="0"?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Refund Amount.<\/span>'}):$("#idApplicationDate").val()==0||$("#idApplicationDate").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please Enter Application Date.<\/span>'}):UpdateRefundChallanDetails()});$("#SaveRefundChallanDetailsBtn").click(function(){$("#idPartyName").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Party Name.<\/span>'}):$("#idPartyMobileNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Mobile Number.<\/span>'}):$("#idChallanNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Number.<\/span>'}):$("#idReEnterChallanNumber").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Re-Enter Challan Number.<\/span>'}):$("#idChallanDate").val()==""||$("#idChallanDate").val()==0?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Date.<\/span>'}):$("#idChallanAmount").val()==""||$("#idChallanAmount").val()==0||$("#idChallanAmount").val()=="0"?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Amount.<\/span>'}):$("#idRefundAmount").val()==""||$("#idRefundAmount").val()==0||$("#idChallanAmount").val()=="0"?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Refund Amount.<\/span>'}):$("#idApplicationDate").val()==0||$("#idApplicationDate").val()==""?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please Enter Application Date.<\/span>'}):SaveRefundChallanDetails()});$("#FinalizeRefundChallanDetailsBtn").click(function(){if($("#idPartyName").val()=="")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Party Name.<\/span>'});else if($("#idPartyMobileNumber").val()=="")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Mobile Number.<\/span>'});else if($("#idChallanNumber").val()=="")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Number.<\/span>'});else if($("#idReEnterChallanNumber").val()=="")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Re-Enter Challan Number.<\/span>'});else if($("#idChallanDate").val()==""||$("#idChallanDate").val()==0)bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Date.<\/span>'});else if($("#idChallanAmount").val()==""||$("#idChallanAmount").val()==0||$("#idChallanAmount").val()=="0")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Challan Amount.<\/span>'});else if($("#idRefundAmount").val()==""||$("#idRefundAmount").val()==0||$("#idChallanAmount").val()=="0")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please enter Refund Amount.<\/span>'});else if($("#idApplicationDate").val()==0||$("#idApplicationDate").val()=="")bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Please Enter Application Date.<\/span>'});else var n=bootbox.confirm({title:"<span class='boot-alert-title'><i class='fa fa-question-circle'><\/i>&nbsp;&nbsp;Confirm<\/span>",message:"<span class='boot-alert-txt'>Please verify all Details of Challan to be refunded before finalizing. After finalizing this entry will be non editable. Are you sure to finalize ?<\/span>",buttons:{cancel:{label:'<i class="fa fa-times"><\/i> No',className:"pull-right margin-left-NoBtn"},confirm:{label:'<i class="fa fa-check"><\/i> Yes'}},callback:function(n){n&&FinalizeRefundChallanDetails()}})})});