function refreshCaptcha(){$("#Captcha").val("");$("#dvCaptcha input").val("");$(".newCaptcha").trigger("click")}function validate(){$.trim($("#txtPassword").val())!=""&&(BlockUI(),$.ajax({url:"/Login/GetSessionSalt",type:"GET",async:!0,cache:!1,success:function(n){var i,r;if(n.success==!0){if(n.serverError==!0&&n.success==!1)(n.message!=null||n.message!="")&&($.unblockUI(),bootbox.alert(n.message,function(n){n&&(window.location.href="/Error/Index")}));else if(n.dataMessage!=null){var u=n.dataMessage,f=hex_sha512($("#txtPassword").val()),e=f+rstr2hex(n.SENCData).toUpperCase(),t=hex_sha512(e);alert(t);i=t+rstr2hex(u).toUpperCase();r=hex_sha512(i);$("#txtPassword").val(r);$("#frmLogin").submit();$("#Captcha").val("")}$.unblockUI()}},error:function(){window.location.href="/Error/Index";$.unblockUI()}}))}function resetAll(){$("#Email").val("");$("#Password").val("")}function BlockUI(){$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px",opacity:.5,color:"#fff"}})}var token="",header={};$(document).ready(function(){$("#txtEmail").focus();$("#Captcha").attr("placeholder","Captcha");$("#Captcha").attr("tabindex",3);$("#txtEmail").on("cut copy paste",function(n){n.preventDefault()});$("#txtPassword").on("cut copy paste",function(n){n.preventDefault()});token=$("[name=__RequestVerificationToken]").val();header.__RequestVerificationToken=token;$(window).keydown(function(n){var t=$("#Captcha").is(":focus");if(n.keyCode==13){if($("#txtEmail").val()=="")return n.preventDefault(),!1;t&&$("#btnlogin").trigger("click")}});$("#btnlogin").click(function(){$("#LoginformId").valid()&&$.trim($("#txtPassword").val())!=""&&(BlockUI(),$.ajax({url:"/Login/GetSessionSalt",type:"GET",async:!1,cache:!1,success:function(n){if(n.success==!0&&n.dataMessage!=null){var t=n.dataMessage,i=hex_sha512($("#txtPassword").val()),r=i+rstr2hex(n.SENCData).toUpperCase(),u=hex_sha512(r),f=u+rstr2hex(t).toUpperCase(),e=hex_sha512(f);$("#txtPassword").val(e);$.ajax({url:"/Login/UserLogin",type:"POST",headers:header,data:$("#LoginformId").serialize(),dataType:"json",success:function(n){refreshCaptcha();n.success?window.location.href=n.URL:($("#txtPassword").val(""),bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.responseMsg+"<\/span>",callback:function(){$("#txtPassword").focus()}}));$.unblockUI()},error:function(){bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Something went wrong while proccessing your request<\/span>',callback:function(){}});$.unblockUI()}})}},error:function(){bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Something went wrong while proccessing your request<\/span>',callback:function(){}});$.unblockUI()}}))});$(".newCaptcha").click(function(){$("#Captcha").val("")});$("#btnReset").click(function(){refreshCaptcha();$("#LoginformId")[0].reset();$(".text-danger").text(" ");$("#txtEmail").focus()});$("#CaptchaDiv").find("br").remove()});