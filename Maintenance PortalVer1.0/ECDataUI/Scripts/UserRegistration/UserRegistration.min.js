function isEmailAddress(n){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)}function refreshCaptcha(){$("#Captcha").val("");$("#dvCaptcha input").val("");$(".newCaptcha").trigger("click")}function BlockUI(){$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px",opacity:.5,color:"#fff"}})}var token="",header={};$(document).ready(function(){token=$("[name=__RequestVerificationToken]").val();header.__RequestVerificationToken=token;$("#FirstName").focus();$("#Captcha").attr("placeholder","Captcha");$("#Captcha").attr("tabindex",12);$("#ddlIDProof").change(function(){$("#IDProofNumber").val("");$("#IDProofNumber").unbind();$("#ddlIDProof").val()==1?($("#IDProofNumber").attr("placeholder","PAN Number"),$("#IDProofNumber").keyup(function(){this.value=this.value.toUpperCase()})):$("#ddlIDProof").val()==2?$("#IDProofNumber").attr("placeholder","Passport Number"):$("#ddlIDProof").val()==3?$("#IDProofNumber").attr("placeholder","Driving License Number"):$("#ddlIDProof").val()==4?$("#IDProofNumber").attr("placeholder","Bank Passbook Number"):$("#ddlIDProof").val()==5?$("#IDProofNumber").attr("placeholder","School Leaving Certificate Number"):$("#ddlIDProof").val()==6?$("#IDProofNumber").attr("placeholder","Matriculation Certificate Number"):$("#ddlIDProof").val()==9?$("#IDProofNumber").attr("placeholder","Water Bill Number"):$("#ddlIDProof").val()==10?$("#IDProofNumber").attr("placeholder","Ration Card Number"):$("#ddlIDProof").val()==12?$("#IDProofNumber").attr("placeholder","Voting Card Number"):$("#ddlIDProof").val()==13?$("#IDProofNumber").attr("placeholder","Aadhar Card Number"):$("#IDProofNumber").attr("placeholder","ID Proof Number")});$("#btnGotoLoginPage").click(function(){window.location.href="/Login/UserLogin"});$("#txtUserName").focusout(function(){if(isEmailAddress($("#txtUserName").val())){var n=$("#txtUserName").val();n.length!=0&&$.ajax({type:"GET",url:"/Account/CheckUserNameAvailability?userName="+n,success:function(n){n.success?($("#InValidUserNameID").show(),$("#txtUserName").focus()):$("#InValidUserNameID").hide()},error:function(){bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Something went wrong while proccessing your request<\/span>',callback:function(){}})}})}else $("#InValidUserNameID").hide()});$(".AllowOnlyNumber").keypress(function(n){if(n.which!=8&&n.which!=0&&(n.which<48||n.which>57))return!1});$("#btnSubmit").click(function(){$("#RegistrationFormId").valid()&&(BlockUI(),$.ajax({url:"/Login/GetSessionSalt",type:"GET",async:!0,cache:!1,success:function(n){if(n.success==!0){if(n.serverError==!0&&n.success==!1)(n.message!=null||n.message!="")&&($.unblockUI(),bootbox.alert(n.message,function(n){n&&(window.location.href="/Error/Index")}));else if(n.dataMessage!=null){var t=hex_sha512($("#txtPassword").val()),i=t+rstr2hex(n.SENCData).toUpperCase(),r=hex_sha512(i);$("#txtPassword").val(r);var t=hex_sha512($("#txtConfirmPassword").val()),i=t+rstr2hex(n.SENCData).toUpperCase(),r=hex_sha512(i);$("#txtConfirmPassword").val(r);$.ajax({url:"/Account/UserRegistration",type:"POST",headers:header,data:$("#RegistrationFormId").serialize(),dataType:"json",success:function(n){refreshCaptcha();n.success?(bootbox.alert({message:n.responseMsg,callback:function(){$.ajax({type:"GET",url:"/Alerts/SendSMSDetails/VerifyCaptchaAfterRegistrationForOTP",data:{IsOTPSent:0,EncryptedUId:n.EncryptedUId,OTPTypeId:1},contentType:"application/json; charset=utf-8",datatype:"json",success:function(n){$("#divViewOTPValidationModal").modal({backdrop:"static",keyboard:!1});$("#divLoadOTPValidationView").html(n);$("#divViewOTPValidationModal").modal("show");$("#divCaptcha").show();$("#divOTPInput").hide();$("#btnCloseOTPModal").off("click").click(function(){$("#divViewOTPValidationModal").modal("hide")});$.unblockUI()},error:function(n){$.unblockUI();bootbox.alert("Error: "+n)}})}}),$("#RegistrationFormId")[0].reset(),$("#btnReset").trigger("click"),$.unblockUI()):(n.errorMessage==undefined?bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">Something went wrong while processing your request .<\/span>',callback:function(){window.location.href="/Error/SessionExpire";$.unblockUI()}}):n.errorMessage.length!=0?(bootbox.alert({message:'<i class="fa fa-exclamation-triangle text-danger boot-icon boot-icon"><\/i><span class="boot-alert-txt">'+n.errorMessage+"<\/span>",callback:function(){$("#txtPassword").val("");$("#txtConfirmPassword").val("");$("#txtCaptcha").val("");refreshCaptcha()}}),$.unblockUI()):(bootbox.alert({message:n.responseMsg}),$("#txtPassword").val(""),$("#txtConfirmPassword").val(""),$("#txtCaptcha").val("")),$.unblockUI())},error:function(){bootbox.alert("Error occured while processing your request.");$.unblockUI()}})}$.unblockUI()}},error:function(){window.location.href="/Error/Index";$.unblockUI()}}))});$("#txtPAN").keyup(function(){this.value=this.value.toUpperCase()});$(".newCaptcha").click(function(){$("#Captcha").val("")});$("#btnReset").click(function(){refreshCaptcha();$(".text-danger").text("")})});